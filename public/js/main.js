(()=>{"use strict";const e={form:document.querySelector(".form"),header:document.querySelector("h1"),loginInput:document.querySelector('input[placeholder="Email"]'),passInput:document.querySelector('input[placeholder="Password"]'),button:document.querySelector('input[type="submit"]'),link:document.querySelector("a"),authAs:"",addEventListeners:function(){e.button.addEventListener("click",(()=>{if("login"===e.form.classList[1])return e.signIn();e.signUp()})),e.link.addEventListener("click",(()=>{"login"===e.form.classList[1]?e.changeToRegisterForm():e.changeToLoginForm()})),e.loginInput.addEventListener("click",(()=>{e.loginInput.style.borderColor=""})),e.passInput.addEventListener("click",(()=>{e.passInput.style.borderColor=""}))},changeToRegisterForm:function(){e.form.classList.remove("login"),e.form.classList.add("register"),e.link.textContent="Already registered? Sing in",e.header.textContent="Register",e.button.value="Register"},changeToLoginForm:function(){e.form.classList.remove("register"),e.form.classList.add("login"),e.link.textContent="New user? Sign up",e.header.textContent="Login",e.button.value="Login"},signIn:function(){const t=e.loginInput.value,n=e.passInput.value;if(""===t)e.loginInput.style.borderColor="red",alert("Please, enter your login!");else if(""===n)e.passInput.style.borderColor="red",alert("Please, enter your password!");else if(null==localStorage.getItem(t))e.loginInput.style.borderColor="red",alert("Username is not correct! Check your username or register!");else{if(JSON.parse(localStorage.getItem(t)).pass===n)return e.completedAuth();e.passInput.style.borderColor="red",alert("Password is wrong!")}},alwaysTwoDigits:function(e){return 1===String(e).length?"0"+e:e},signUp:function(){const t=e.loginInput.value,n=e.passInput.value;if(""===t)alert("Please, enter your login!");else if(""===n)alert("Please, enter your password!");else if(null==localStorage.getItem(t)){const o=new Date;let s=`${e.alwaysTwoDigits(o.getDate())}/${e.alwaysTwoDigits(o.getMonth()+1)}/${e.alwaysTwoDigits(o.getFullYear())} ${e.alwaysTwoDigits(o.getHours())}:${e.alwaysTwoDigits(o.getMinutes())}:${e.alwaysTwoDigits(o.getSeconds())}`;localStorage.setItem(t,JSON.stringify({pass:n,regDate:s})),e.loginInput.value="",e.passInput.value="",alert("Registration was successful! Log in!"),e.changeToLoginForm()}else alert("This user is already registered! Try logging in!"),e.loginInput.style.borderColor="red"},completedAuth:function(){e.authAs=e.loginInput.value,e.isAuth=!0,e.loginInput.value="",e.passInput.value="",e.form.style.display="none",alert("Succsesed login!")}};e()})();